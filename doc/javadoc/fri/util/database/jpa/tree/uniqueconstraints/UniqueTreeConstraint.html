<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_20) on Sun Nov 24 16:18:26 CET 2013 -->
<TITLE>
UniqueTreeConstraint
</TITLE>

<META NAME="date" CONTENT="2013-11-24">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="UniqueTreeConstraint";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/UniqueTreeConstraint.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../fri/util/database/jpa/tree/uniqueconstraints/UniqueConstraintViolationException.html" title="class in fri.util.database.jpa.tree.uniqueconstraints"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?fri/util/database/jpa/tree/uniqueconstraints/UniqueTreeConstraint.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="UniqueTreeConstraint.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
fri.util.database.jpa.tree.uniqueconstraints</FONT>
<BR>
Interface UniqueTreeConstraint&lt;N extends <A HREF="../../../../../../fri/util/database/jpa/tree/TreeNode.html" title="interface in fri.util.database.jpa.tree">TreeNode</A>&gt;</H2>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../../../../../fri/util/database/jpa/tree/uniqueconstraints/AbstractUniqueTreeConstraintImpl.html" title="class in fri.util.database.jpa.tree.uniqueconstraints">AbstractUniqueTreeConstraintImpl</A>, <A HREF="../../../../../../fri/util/database/jpa/tree/uniqueconstraints/AbstractWholeTreeUniqueConstraintImpl.html" title="class in fri.util.database.jpa.tree.uniqueconstraints">AbstractWholeTreeUniqueConstraintImpl</A>, <A HREF="../../../../../../fri/util/database/jpa/tree/nestedsets/uniqueconstraints/UniqueChildrenConstraintImpl.html" title="class in fri.util.database.jpa.tree.nestedsets.uniqueconstraints">UniqueChildrenConstraintImpl</A>, <A HREF="../../../../../../fri/util/database/jpa/tree/closuretable/uniqueconstraints/UniqueChildrenConstraintImpl.html" title="class in fri.util.database.jpa.tree.closuretable.uniqueconstraints">UniqueChildrenConstraintImpl</A>, <A HREF="../../../../../../fri/util/database/jpa/tree/nestedsets/uniqueconstraints/UniqueChildrenTemporalConstraintImpl.html" title="class in fri.util.database.jpa.tree.nestedsets.uniqueconstraints">UniqueChildrenTemporalConstraintImpl</A>, <A HREF="../../../../../../fri/util/database/jpa/tree/closuretable/uniqueconstraints/UniqueChildrenTemporalConstraintImpl.html" title="class in fri.util.database.jpa.tree.closuretable.uniqueconstraints">UniqueChildrenTemporalConstraintImpl</A>, <A HREF="../../../../../../fri/util/database/jpa/tree/nestedsets/uniqueconstraints/UniqueWholeTreeConstraintImpl.html" title="class in fri.util.database.jpa.tree.nestedsets.uniqueconstraints">UniqueWholeTreeConstraintImpl</A>, <A HREF="../../../../../../fri/util/database/jpa/tree/closuretable/uniqueconstraints/UniqueWholeTreeConstraintImpl.html" title="class in fri.util.database.jpa.tree.closuretable.uniqueconstraints">UniqueWholeTreeConstraintImpl</A>, <A HREF="../../../../../../fri/util/database/jpa/tree/nestedsets/uniqueconstraints/UniqueWholeTreeTemporalConstraintImpl.html" title="class in fri.util.database.jpa.tree.nestedsets.uniqueconstraints">UniqueWholeTreeTemporalConstraintImpl</A>, <A HREF="../../../../../../fri/util/database/jpa/tree/closuretable/uniqueconstraints/UniqueWholeTreeTemporalConstraintImpl.html" title="class in fri.util.database.jpa.tree.closuretable.uniqueconstraints">UniqueWholeTreeTemporalConstraintImpl</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>UniqueTreeConstraint&lt;N extends <A HREF="../../../../../../fri/util/database/jpa/tree/TreeNode.html" title="interface in fri.util.database.jpa.tree">TreeNode</A>&gt;</B></DL>
</PRE>

<P>
Implementers check unique constraints in a tree-table.
 This interface expects the constructor of the implementation to receive
 names of properties that have to be unique.
 <p/>
 Mind that this constraint implementation must be applied BEFORE setXxx() is called
 on a domain object (POJO), as the JPA container might flush the setXxx() call to
 database before the checker query is launched (then, of course, the wrong value
 will be found by the query). Thus the application MUST call
 <code>treeDao.checkUniqueConstraint()</code> BEFORE updating an unique property,
 and it must do this using a clone of the persistent entity.
 See <code>AbstractTreeTest.setName()</code> unit test method for an example how to do this.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Fritz Ritzberger, 20.10.2011</DD>
</DL>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../fri/util/database/jpa/tree/uniqueconstraints/UniqueTreeConstraint.html#checkUniqueConstraint(java.util.List, fri.util.database.jpa.tree.util.TreeActionLocation)">checkUniqueConstraint</A></B>(java.util.List&lt;<A HREF="../../../../../../fri/util/database/jpa/tree/uniqueconstraints/UniqueTreeConstraint.html" title="type parameter in UniqueTreeConstraint">N</A>&gt;&nbsp;candidates,
                      <A HREF="../../../../../../fri/util/database/jpa/tree/util/TreeActionLocation.html" title="class in fri.util.database.jpa.tree.util">TreeActionLocation</A>&lt;<A HREF="../../../../../../fri/util/database/jpa/tree/uniqueconstraints/UniqueTreeConstraint.html" title="type parameter in UniqueTreeConstraint">N</A>&gt;&nbsp;location)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The implementation of this is expected to check the uniqueness of passed node(s).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../fri/util/database/jpa/tree/uniqueconstraints/UniqueTreeConstraint.html#setContext(fri.util.database.jpa.commons.DbSession, fri.util.database.jpa.tree.TreeDao, java.lang.String, java.lang.String)">setContext</A></B>(<A HREF="../../../../../../fri/util/database/jpa/commons/DbSession.html" title="interface in fri.util.database.jpa.commons">DbSession</A>&nbsp;session,
           <A HREF="../../../../../../fri/util/database/jpa/tree/TreeDao.html" title="interface in fri.util.database.jpa.tree">TreeDao</A>&lt;<A HREF="../../../../../../fri/util/database/jpa/tree/uniqueconstraints/UniqueTreeConstraint.html" title="type parameter in UniqueTreeConstraint">N</A>&gt;&nbsp;dao,
           java.lang.String&nbsp;nodeEntityName,
           java.lang.String&nbsp;pathEntityName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called by the DAO to publish context information to this constraint-checker.</TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="checkUniqueConstraint(java.util.List, fri.util.database.jpa.tree.util.TreeActionLocation)"><!-- --></A><H3>
checkUniqueConstraint</H3>
<PRE>
boolean <B>checkUniqueConstraint</B>(java.util.List&lt;<A HREF="../../../../../../fri/util/database/jpa/tree/uniqueconstraints/UniqueTreeConstraint.html" title="type parameter in UniqueTreeConstraint">N</A>&gt;&nbsp;candidates,
                              <A HREF="../../../../../../fri/util/database/jpa/tree/util/TreeActionLocation.html" title="class in fri.util.database.jpa.tree.util">TreeActionLocation</A>&lt;<A HREF="../../../../../../fri/util/database/jpa/tree/uniqueconstraints/UniqueTreeConstraint.html" title="type parameter in UniqueTreeConstraint">N</A>&gt;&nbsp;location)</PRE>
<DL>
<DD>The implementation of this is expected to check the uniqueness of passed node(s).
 Called by the DAO when addChild(), move() or copy() is performed.
 Mind that you must call <code>treeDao.checkUniqueConstraint()</code>
 explicitly when updating a node property, see explanation in header comment!
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>candidates</CODE> - one (default) or more (copy/move only) entities that hold values
                to check for uniqueness at location, when list, the copied node will be first,
                then its sub-nodes.<DD><CODE>location</CODE> - the information where the pending modification is going to happen.
<DT><B>Returns:</B><DD>false when unique constraint would be violated, else true.</DL>
</DD>
</DL>
<HR>

<A NAME="setContext(fri.util.database.jpa.commons.DbSession, fri.util.database.jpa.tree.TreeDao, java.lang.String, java.lang.String)"><!-- --></A><H3>
setContext</H3>
<PRE>
void <B>setContext</B>(<A HREF="../../../../../../fri/util/database/jpa/commons/DbSession.html" title="interface in fri.util.database.jpa.commons">DbSession</A>&nbsp;session,
                <A HREF="../../../../../../fri/util/database/jpa/tree/TreeDao.html" title="interface in fri.util.database.jpa.tree">TreeDao</A>&lt;<A HREF="../../../../../../fri/util/database/jpa/tree/uniqueconstraints/UniqueTreeConstraint.html" title="type parameter in UniqueTreeConstraint">N</A>&gt;&nbsp;dao,
                java.lang.String&nbsp;nodeEntityName,
                java.lang.String&nbsp;pathEntityName)</PRE>
<DL>
<DD>Called by the DAO to publish context information to this constraint-checker.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>dao</CODE> - the calling DAO, provides tree access for reading children, parents, etc.<DD><CODE>nodeEntityName</CODE> - name of the JPQL node database table.<DD><CODE>pathEntityName</CODE> - optionally the name of the JPQL tree-path database table, can be null, this is for ClosureTable only.<DD><CODE>session</CODE> - the database session to use for uniqueness checks.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/UniqueTreeConstraint.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../fri/util/database/jpa/tree/uniqueconstraints/UniqueConstraintViolationException.html" title="class in fri.util.database.jpa.tree.uniqueconstraints"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?fri/util/database/jpa/tree/uniqueconstraints/UniqueTreeConstraint.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="UniqueTreeConstraint.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
